(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],Array(49).concat([function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(17),r=n.n(s),i=n(16),o=n(23),l=(n(49),n(6)),u=n(5),j=n(3),d=n(0),b=Object(a.createContext)(),h=function(e){var t=Object(a.useState)(null!==localStorage.getItem("TOKEN")),n=Object(j.a)(t,2),c={isAuthenticated:n[0],setIsAuthenticated:n[1]};return Object(d.jsx)(b.Provider,{value:c,children:e.children})},m=b,O=Object(a.createContext)(),p=function(e){var t=Object(a.useState)({watch:[],watching:[],watched:[]}),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)({watch:[],watching:[],watched:[]}),i=Object(j.a)(r,2),o={animeList:c,setAnimeList:s,mangaList:i[0],setMangaList:i[1]};return Object(d.jsx)(O.Provider,{value:o,children:e.children})},x=O,f=n(12),v=n.n(f),g=n(15),N=n(7),w=n.n(N),y=w.a.create({baseURL:"https://api.jikan.moe/v4/"}),I={getSeasonalAnime:function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("seasons/now");case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",t.data.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),searchAnime:function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("anime?q=".concat(t,"&limit=10"));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchManga:function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("manga?q=".concat(t,"&limit=10"));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};n(69);var S=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(u.h)();return Object(a.useEffect)((function(){var t="NavLink";r.pathname.includes(e.path)&&(t="".concat(t," ").concat(t,"--active")),s(t)}),[r.pathname,e.path]),Object(d.jsx)(l.b,{className:c,to:e.path,children:e.title})},A=n(38),C=n(39),k=n(42),B=n(41),_=(n(74),function(e){Object(k.a)(n,e);var t=Object(B.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){return Object(d.jsx)("ul",{className:"AccountOptions",children:Object(d.jsx)("li",{className:"AccountOptions-item",children:Object(d.jsx)(l.b,{to:"/logout",children:"Logout"})})})}}]),n}(c.a.Component));_.contextType=m;var T=Object(u.i)(_);n(75);var L=function(e){return Object(d.jsx)("div",{className:"Navbar",children:Object(d.jsxs)("div",{className:"NavbarInner",children:[Object(d.jsx)("a",{className:"NavbarHeader",href:"/",children:"Project Otaku"}),Object(d.jsxs)("ul",{className:"NavbarNav",children:[Object(d.jsx)("li",{className:"NavbarNav-item",children:Object(d.jsx)(S,{path:"/watchlist",title:"Watchlist"})}),Object(d.jsx)("li",{className:"NavbarNav-item",children:Object(d.jsx)(S,{path:"/browse",title:"Browse"})})]}),Object(d.jsx)(T,{})]})})};n(76);var P=function(e){return Object(d.jsx)("div",{className:"MainContent",children:e.children})};n(77);var F=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(u.h)();return Object(a.useEffect)((function(){var t="WatchlistTypeLink";r.pathname===e.path&&(t="".concat(t," ").concat(t,"--active")),s(t)}),[r.pathname,e.path]),Object(d.jsx)(l.b,{className:c,to:e.path,children:e.title})};n(78);var K=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){for(var e=document.getElementsByClassName("KanbanList"),t=0;t<e.length;t++){e[t].childNodes.forEach((function(e){-1===e.textContent.toLowerCase().indexOf(c.toLowerCase())?e.style.display="none":e.style.display="flex"}))}}),[c]),Object(d.jsxs)("div",{className:"WatchlistSearch",children:[Object(d.jsx)("input",{className:"WatchlistSearch-input",type:"text",value:c,placeholder:"Find anime/manga in list.",onChange:function(e){s(e.target.value)}}),""!==c?Object(d.jsx)("button",{className:"WatchlistSearch-button",onClick:function(e){s("")},children:"x"}):null]})};n(79);var E=function(e){return Object(d.jsxs)("div",{className:"WatchlistHeader",children:[Object(d.jsx)(F,{path:"/watchlist/anime",title:"Anime"}),Object(d.jsx)(F,{path:"/watchlist/manga",title:"Manga"}),Object(d.jsx)(K,{})]})},W=n(13),H=n(20);n(80);var M=function(e){return Object(d.jsxs)("div",{className:"KanbanSection",children:[Object(d.jsx)("div",{className:"KanbanSectionHeader",children:Object(d.jsx)("h2",{className:"KanbanSectionHeader-title",children:e.section})}),e.children]})};n(81);var q=function(e){return Object(d.jsx)("div",Object(W.a)(Object(W.a)({className:"KanbanList",ref:e.provided.innerRef},e.provided.droppableProps),{},{children:e.children}))},D=n(22);n(82);var U=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],r=function(){s("shrink"),e.handleDelete(e.item)};return Object(d.jsx)(H.b,{draggableId:e.item.id.toString(),index:e.index,children:function(t){return Object(d.jsxs)("div",Object(W.a)(Object(W.a)(Object(W.a)({className:"KanbanItem KanbanItem--"+c,ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:[Object(d.jsx)("img",{className:"KanbanItem-image",src:e.item.image_url,alt:e.item.title}),Object(d.jsx)("p",{className:"KanbanItem-title",title:e.item.title,children:e.item.title.length>40?e.item.title.substring(0,40)+"...":e.item.title}),Object(d.jsx)("button",{className:"KanbanItem-delete",title:"Remove Item",onClick:r,children:Object(d.jsx)(D.a,{icon:"trash"})})]}))}})};n(84);var z=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"KanbanItemPlaceholder"}),Object(d.jsx)("div",{className:"KanbanItemPlaceholder"}),Object(d.jsx)("div",{className:"KanbanItemPlaceholder"}),Object(d.jsx)("div",{className:"KanbanItemPlaceholder"})]})};n(85);var R=function(e){var t=Object(u.g)(),n=function(n){var a=Object(W.a)({},e.list),c=a[n.status].findIndex((function(e){return e.id===n.id})),s=a[n.status][c-1],r=a[n.status][c+1];if(s){s.next_item_id=r?r.id:null;var i={Authorization:"Token ".concat(localStorage.getItem("TOKEN"))};w.a.put("/api/watchlist/".concat(s.id,"/"),s,{headers:i}).catch((function(e){e.response?401===e.response.status?t.push("/logout"):console.log(e.response.data):t.push("/server-error")}))}a[n.status].splice(c,1),setTimeout((function(){return e.setList(a)}),500);var o={Authorization:"Token ".concat(localStorage.getItem("TOKEN"))};w.a.delete("/api/watchlist/".concat(n.id,"/"),{headers:o}).catch((function(e){e.response?401===e.response.status?t.push("/logout"):console.log(e.response.data):t.push("/server-error")}))};return Object(d.jsx)("div",{className:"Kanban",children:Object(d.jsx)("div",{className:"KanbanWrapper",children:Object(d.jsx)(H.a,{onDragEnd:function(n){var a=n.source,c=n.destination;n.draggableId;if(c){if(a.droppableId===c.droppableId&&a.index===c.index)return;var s=Object(W.a)({},e.list),r=[],i=s[a.droppableId],o=s[c.droppableId],l=i[a.index-1],u=i[a.index+1];l&&(l.next_item_id=u?u.id:null,r.push(l));var j=i.splice(a.index,1)[0];j.status=c.droppableId,o.splice(c.index,0,j),j=o[c.index];var d=o[c.index-1],b=o[c.index+1];d&&(d.next_item_id=j?j.id:null,r.push(d)),j.next_item_id=b?b.id:null,r.push(j),e.setList(s);for(var h=0;h<r.length;h++){var m=r[h],O={Authorization:"Token ".concat(localStorage.getItem("TOKEN"))};w.a.put("/api/watchlist/".concat(m.id,"/"),m,{headers:O}).catch((function(e){e.response?401===e.response.status?t.push("/logout"):console.log(e.response.data):t.push("/server-error")}))}}},children:Object(d.jsx)("div",{className:"KanbanContent",children:["watch","watching","watched"].map((function(t,a){return Object(d.jsx)(M,{section:t,children:Object(d.jsx)(H.c,{droppableId:t,children:function(a){return Object(d.jsx)(q,{provided:a,children:e.isFetchingWatchlist?Object(d.jsx)(z,{}):Object(d.jsxs)(d.Fragment,{children:[e.list[t].map((function(e,t){return Object(d.jsx)(U,{item:e,index:t,handleDelete:n},e.id)})),a.placeholder]})})}})},a)}))})})})})};n(86);var J=function(e){var t=Object(a.useContext)(x),n=t.animeList,c=t.setAnimeList,s=t.mangaList,r=t.setMangaList;return Object(d.jsxs)("div",{className:"Watchlist",children:[Object(d.jsx)(E,{}),Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.b,{path:"/watchlist/anime",children:Object(d.jsx)(R,{list:n,setList:c,isFetchingWatchlist:e.isFetchingWatchlist})}),Object(d.jsx)(u.b,{path:"/watchlist/manga",children:Object(d.jsx)(R,{list:s,setList:r,isFetchingWatchlist:e.isFetchingWatchlist})}),Object(d.jsx)(u.b,{path:"/watchlist",children:Object(d.jsx)(u.a,{to:"/watchlist/anime"})}),Object(d.jsx)(u.b,{path:"/watchlist/*",children:Object(d.jsx)(u.a,{to:"/404"})})]})]})};n(87);var G=function(e){return Object(d.jsx)("div",{className:"BrowseHeader",children:Object(d.jsx)("h2",{className:"BrowseHeader-title",children:"Browse"})})};n(88);var Q=function(e){return Object(d.jsx)("div",{className:"BrowseContent",children:e.children})};n(89);var V=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1];return Object(d.jsxs)("form",{className:"BrowseSearchBar",onSubmit:function(t){t.preventDefault(),o!==c&&(e.search(c),l(c))},children:[Object(d.jsx)("input",{className:"BrowseSearchBar-input",type:"text",value:c,placeholder:"Search anime...",onChange:function(e){return s(e.target.value)}}),Object(d.jsx)("button",{className:"BrowseSearchBar-button",type:"submit",children:Object(d.jsx)(D.a,{icon:"search"})})]})};n(90);var X=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(!1),i=Object(j.a)(r,2),o=i[0],l=i[1],b=Object(a.useContext)(x),h=b.animeList,m=b.setAnimeList,O=b.mangaList,p=b.setMangaList,f=Object(u.g)();if(Object(a.useEffect)((function(){var t;for(var n in"anime"===e.type?t=h:"manga"===e.type&&(t=O),t){var a=t[n].find((function(t){return t.mal_id===e.item.mal_id}));a&&(l(!0),s("Already in ".concat(a.status,".")))}}),[h,O,e.type,e.item.mal_id]),o)return Object(d.jsx)("div",{className:"AddItem",children:Object(d.jsx)("p",{className:"AddItem-text",children:c})});var v=function(t,n,a){var c,r;if("anime"===e.type)c=h,r=m;else{if("manga"!==e.type)return;c=O,r=p}var i=c[a][0],o={mal_id:n.mal_id,title:n.title,image_url:n.images.webp.image_url,mal_url:n.url,type:e.type,status:a,next_item_id:i?i.id:null},u={Authorization:"Token ".concat(localStorage.getItem("TOKEN"))};w.a.post("/api/watchlist/",o,{headers:u}).then((function(e){var t=Object(W.a)({},c);t[a].unshift(e.data),r(t),l(!0),s("Added to ".concat(e.data.status))})).catch((function(e){e.response?401===e.response.status?f.push("/logout"):console.log(e.response.data):f.push("/server-error")}))};return Object(d.jsxs)("div",{className:"AddItem",children:[Object(d.jsx)("p",{className:"AddItem-text",children:"Add to:"}),Object(d.jsx)("button",{className:"AddItem-button",type:"button",onClick:function(t){return v(0,e.item,"watch")},children:"Watch"}),Object(d.jsx)("button",{className:"AddItem-button",type:"button",onClick:function(t){return v(0,e.item,"watching")},children:"Watching"}),Object(d.jsx)("button",{className:"AddItem-button",type:"button",onClick:function(t){return v(0,e.item,"watched")},children:"Watched"})]})};n(91);var Y=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){e.item.title.length>=40?s(e.item.title.substring(0,39)+"..."):s(e.item.title)}),[e.item.title]),Object(d.jsxs)("div",{className:"BrowseItem",children:[Object(d.jsx)("div",{className:"BrowseItemImage",children:Object(d.jsx)("img",{className:"BrowseItem-img",src:e.item.images.webp.image_url,alt:e.item.title})}),Object(d.jsx)("div",{className:"BrowseItemDetails",children:Object(d.jsx)("a",{className:"BrowseItem-title",href:e.item.url,title:e.item.url,target:"_blank",rel:"noreferrer",children:c})}),Object(d.jsx)("div",{className:"BrowseItemOptions",children:Object(d.jsx)(X,{item:e.item,type:e.type})})]})};n(92);var Z=function(e){return Object(d.jsx)("div",{className:"BrowseList",children:e.list.map((function(t,n){return Object(d.jsx)(Y,{item:t,type:e.type},n)}))})};n(93);var $=function(e){return Object(d.jsxs)("div",{className:"BrowseList",children:[Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"}),Object(d.jsx)("div",{className:"BrowseItemPlaceholder"})]})};n(94);var ee=function(e){var t=Object(a.useState)([]),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)([]),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(a.useState)(!1),b=Object(j.a)(u,2),h=b[0],m=b[1],O=Object(a.useState)(!1),p=Object(j.a)(O,2),x=p[0],f=p[1],N=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),m(!0),e.next=4,I.searchAnime(t);case 4:return n=e.sent,s(n),e.next=8,I.searchManga(t);case 8:a=e.sent,l(a),m(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"Airing"}),Object(d.jsx)(Z,{list:e.airingAnime,type:"anime"})]});return x&&(w=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Anime"}),Object(d.jsx)(Z,{list:c,type:"anime"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Manga"}),Object(d.jsx)(Z,{list:o,type:"manga"})]})]})),Object(d.jsxs)("div",{className:"Browse",children:[Object(d.jsx)(G,{}),Object(d.jsxs)(Q,{children:[Object(d.jsx)(V,{search:N}),h||e.isFetchingAiringAnime?Object(d.jsx)($,{}):w]})]})};n(95);var te=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(!1),i=Object(j.a)(r,2),o=i[0],l=i[1],b=Object(a.useState)([]),h=Object(j.a)(b,2),O=h[0],p=h[1],f=Object(a.useContext)(m).isAuthenticated,N=Object(a.useContext)(x),y=N.setAnimeList,S=N.setMangaList,A=Object(u.g)();return Object(a.useEffect)((function(){var e=!0,t=w.a.CancelToken.source();e&&s(!0);var n={Authorization:"Token ".concat(localStorage.getItem("TOKEN"))};return w.a.get("/api/watchlist/",{headers:n,cancelToken:t.token}).then((function(t){var n=t.data,a=function(e){var t={watch:[],watching:[],watched:[]},n=function(n){for(var a=t[n],c=e.filter((function(e){return e.status===n}));0!==c.length;)if(0===a.length){var s=c.findIndex((function(e){return null===e.next_item_id})),r=c.splice(s,1)[0];a.unshift(r)}else!function(){var e=a[0],t=c.findIndex((function(t){return t.next_item_id===e.id})),n=c.splice(t,1)[0];a.unshift(n)}()};for(var a in t)n(a);return t},c=n.filter((function(e){return"anime"===e.type})),s=n.filter((function(e){return"manga"===e.type}));e&&(y(a(c)),S(a(s)))})).catch((function(e){w.a.isCancel(e)?console.log("fetch watchlist canceled."):e.response?401===e.response.status&&A.push("/logout"):console.log(e)})).finally((function(){e&&s(!1)})),function(){e=!1,t.cancel()}}),[y,S,A]),Object(a.useEffect)((function(){l(!0),function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getSeasonalAnime();case 2:t=e.sent,p(t),l(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),f?Object(d.jsxs)("div",{className:"Home",children:[Object(d.jsx)(L,{}),Object(d.jsx)(P,{children:Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.b,{path:"/watchlist",children:Object(d.jsx)(J,{isFetchingWatchlist:c})}),Object(d.jsx)(u.b,{path:"/browse",children:Object(d.jsx)(ee,{airingAnime:O,isFetchingAiringAnime:o})}),Object(d.jsx)(u.b,{exact:!0,path:"/",children:Object(d.jsx)(u.a,{to:"/watchlist"})}),Object(d.jsx)(u.b,{path:"*",children:Object(d.jsx)(u.a,{to:"/404"})})]})})]}):Object(d.jsx)(u.a,{to:"/logout"})};n(96);var ne=function(e){return Object(d.jsx)("form",{className:"Form",onSubmit:e.onSubmit,children:e.children})};n(97);var ae=function(e){return Object(d.jsx)("h2",{className:"Form-header",children:e.title})};n(98);var ce=function(e){return Object(d.jsx)("ul",{className:"FormErrorList",children:e.errors.map((function(e,t){return Object(d.jsx)("li",{className:"FormErrorList-item",children:e},t)}))})};n(99);var se=function(e){return Object(d.jsx)("input",{className:"Form-field",type:e.type,placeholder:e.fieldname,onChange:e.onChange})};n(100);var re=function(e){return Object(d.jsx)("button",{className:"Form-button Form-button--"+e.classType,type:e.buttonType,onClick:e.onClick,children:e.text})};var ie=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1],b=Object(a.useState)([]),h=Object(j.a)(b,2),O=h[0],p=h[1],x=Object(a.useContext)(m).setIsAuthenticated,f=Object(u.g)();return Object(d.jsxs)(ne,{onSubmit:function(e){e.preventDefault(),function(){var e=[];return""===c&&e.push("Username is required."),""===o&&e.push("Password is required."),p(e),0===e.length}()&&w.a.post("/api/auth/login/",{username:c,password:o}).then((function(e){localStorage.setItem("TOKEN",e.data.token),x(!0),f.push("/watchlist")})).catch((function(e){if(e.response){var t=[];e.response.data.non_field_errors&&t.push(e.response.data.non_field_errors),p(t)}else f.push("/server-error")}))},children:[Object(d.jsx)(ae,{title:"Sign In"}),0!==O.length?Object(d.jsx)(ce,{errors:O}):null,Object(d.jsx)(se,{type:"text",fieldname:"username",onChange:function(e){s(e.target.value)}}),Object(d.jsx)(se,{type:"password",fieldname:"password",onChange:function(e){l(e.target.value)}}),Object(d.jsx)(re,{classType:"primary",buttonType:"submit",text:"Sign In"}),Object(d.jsx)("p",{children:"or"}),Object(d.jsx)(re,{classType:"secondary",buttonType:"button",text:"Sign Up",onClick:e.swapFormComponent})]})};var oe=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1],b=Object(a.useState)(""),h=Object(j.a)(b,2),O=h[0],p=h[1],x=Object(a.useState)([]),f=Object(j.a)(x,2),v=f[0],g=f[1],N=Object(a.useContext)(m).setIsAuthenticated,y=Object(u.g)();return Object(d.jsxs)(ne,{onSubmit:function(e){if(e.preventDefault(),function(){var e=[];return""===c&&e.push("Username is required."),""===o&&e.push("Password is required."),""===O&&e.push("Confirm Password is required."),o&&O&&o!==O&&e.push("Passwords didn't match."),g(e),0===e.length}()){var t={username:c,password:o};w.a.post("/api/auth/register/",t).then((function(e){w.a.post("/api/auth/login/",t).then((function(e){localStorage.setItem("TOKEN",e.data.token),N(!0),y.push("/watchlist")})).catch((function(e){if(e.response){var t=[];e.response.data.non_field_errors&&t.push(e.response.data.non_field_errors),g(t)}else y.push("/server-error")}))})).catch((function(e){if(e.response){var t=[];e.response.data.username&&t.push(e.response.data.username),g(t)}else y.push("/server-error")}))}},children:[Object(d.jsx)(ae,{title:"Sign Up"}),0!==v.length?Object(d.jsx)(ce,{errors:v}):null,Object(d.jsx)(se,{type:"text",fieldname:"username",onChange:function(e){s(e.target.value)}}),Object(d.jsx)(se,{type:"password",fieldname:"password",onChange:function(e){l(e.target.value)}}),Object(d.jsx)(se,{type:"password",fieldname:"confirm password",onChange:function(e){p(e.target.value)}}),Object(d.jsx)(re,{classType:"primary",buttonType:"submit",text:"Sign Up"}),Object(d.jsx)("p",{children:"or"}),Object(d.jsx)(re,{classType:"secondary",buttonType:"button",text:"Sign In",onClick:e.swapFormComponent})]})};n(101);var le=function(e){var t=Object(a.useState)(!0),n=Object(j.a)(t,2),c=n[0],s=n[1],r=function(){s((function(e){return!e}))};return Object(a.useContext)(m).isAuthenticated?Object(d.jsx)(u.a,{to:"/watchlist"}):Object(d.jsxs)("div",{className:"Auth",children:[Object(d.jsxs)("div",{className:"AuthHeader",children:[Object(d.jsx)("h1",{className:"AuthHeader-title",children:"Project Otaku"}),Object(d.jsx)("p",{className:"AuthHeader-details",children:"Create and manage your anime and manga list."})]}),Object(d.jsx)("div",{className:"UserForm",children:c?Object(d.jsx)(ie,{swapFormComponent:r}):Object(d.jsx)(oe,{swapFormComponent:r})})]})};n(102);var ue=function(e){return Object(d.jsxs)("div",{className:"ServerError",children:[Object(d.jsx)("h1",{children:"There seems to be a problem with the server. Please try again later."}),Object(d.jsx)(l.b,{to:"/",children:"Go back."})]})};var je=function(e){var t=Object(a.useContext)(m).setIsAuthenticated,n=Object(u.g)();return Object(a.useEffect)((function(){var e={Authorization:"Token ".concat(localStorage.getItem("TOKEN"))};w.a.post("/api/auth/logout/",null,{headers:e}).catch((function(e){})),localStorage.removeItem("TOKEN"),t(!1),n.push("/auth")}),[t,n]),Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"Logging out."})})};n(103);var de=function(e){return Object(d.jsxs)("div",{className:"PageNotFound",children:[Object(d.jsx)("h1",{children:"Page Not Found."}),Object(d.jsx)(l.b,{to:"/",children:"Back to homepage."})]})};var be=function(){return Object(d.jsx)(h,{children:Object(d.jsx)(p,{children:Object(d.jsx)(l.a,{children:Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.b,{path:"/auth",children:Object(d.jsx)(le,{})}),Object(d.jsx)(u.b,{path:"/logout",children:Object(d.jsx)(je,{})}),Object(d.jsx)(u.b,{path:"/server-error",children:Object(d.jsx)(ue,{})}),Object(d.jsx)(u.b,{path:"/404",children:Object(d.jsx)(de,{})}),Object(d.jsx)(u.b,{path:"/",children:Object(d.jsx)(te,{})})]})})})})};i.b.add(o.c,o.a,o.b),r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(be,{})}),document.getElementById("root"))}]),[[104,1,2]]]);
//# sourceMappingURL=main.1304548c.chunk.js.map